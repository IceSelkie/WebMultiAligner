<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>One to Many Sequence Aligner</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>One to Many Sequence Aligner</h1>
  <p>
    Enter the original (wild type) sequence in the first box. (This will be the sequence that all others will be compared to)
    Paste the reads into the second box, and each line will be attempted to be aligned to the wildtype sequence.
    The output will display each line, as best aligned to the wildtype sequence, with the mismatches and indels highlighted in each line.
    <br>
    <br>
    The algorithm uses a <a href="https://en.wikipedia.org/wiki/Gap_penalty#Semi-global_alignment">semi-global alignment</a> (match whole wildtype to the best matching subsequence of the reads) with a modified <a href="https://en.wikipedia.org/wiki/Gap_penalty#Affine">affine fitting</a>.
    If the original is shorter than the others, the others will be trimmed to match.
    The parameters used are: match:+1, mismatch:-&#189;, indelBegin:-1&#189;, indelContinue:-0.4.
    This means that indels will try to be grouped together, if reasonably similar.
  </p>
  <input type="text" id="keyword" placeholder="Original (wild type) sequence (The reference sequence all others are compared to)" spellcheck="false"/>
  <textarea id="text" placeholder="Untrimmed reads here (The sequences to compare to the reference)
Output will be automatically trimmed to best fit." spellcheck="false"></textarea>
  <div class="output" id="output"><span class="output-text" id="output-text"><i style="color: #78A0A1">Output will be shown here...</i></span></div>
  <button id="download-btn" style="display: none;" class="disabled-btn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path fill="#2DC770" d="M16.293 9.293L17.707 10.707L12 16.414L6.29297 10.707L7.70697 9.293L11 12.586V2H13V12.586L16.293 9.293ZM18 20V18H20V20C20 21.102 19.104 22 18 22H6C4.896 22 4 21.102 4 20V18H6V20H18Z"/></svg></button>
  <p>
    Todo:<br/>
    1) Add option to change alignment parameters<br/>
    2) Fix Issue: Output can sometimes become misaligned if there are changes and insertions in the same place<br/>
    3) Add a toggle to not ignore spaces<br/>
    4) Add a feedback form/button
  </p>
  <footer>
    Created by Stanley S in 2023. Last updated 2024 Sep 2.
    <br>
    This code is available <a href="https://github.com/IceSelkie/WebMultiAligner">here</a> under the MIT license (open source).
  </footer>

  <script type="text/javascript" src="controller.js"></script>
  <script type="text/javascript" src="downloadButton.js"></script>
  <script type="text/javascript" src="alignment.js"></script>
</body>
</html>
